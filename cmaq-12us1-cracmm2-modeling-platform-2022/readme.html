<!DOCTYPE html>
<html>
<body>

This readme refers to the data within the following dataset on AWS, uploaded for Havala Pye by the CMAS Center
last updated March 14, 2025
<br>
<a href="https://cmaq-12us1-cracmm2-modeling-platform-2022.s3.amazonaws.com/index.html">2022 CRACMMv2 Emissions and ICBC dataset</a>

<h1>Downloading data from S3 Bucket</h1>

This dataset is available as part of the AWS Open Data Program, therefore egress fees are not charged to either the host or the person downloading the data.<br>


Instructions for downloading the aws command line.<br>
<br>

<a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">Instructions to Download AWS Command Line</a> <br>

Once you have it installed, you can use it without credentials.<br>

Example commands:<br>

To query how much data is in a bucket: <br>
<br>


<pre>
aws s3 --no-sign-request ls --summarize --region=us-east-1 --human-readable --recursive s3://cmaq-12us1-cracmm2-modeling-platform-2022/
</pre>

Tail of Output: <br>

<pre>
2025-03-13 09:22:55    2.5 KiB 2022_12US1/emis/emis_dates/smk_merge_dates_202212.txt
2025-03-13 09:24:05    7.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202112.nc
2025-03-13 09:24:35   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202201.nc
2025-03-13 09:25:33   21.3 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202202.nc
2025-03-13 09:26:06   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202203.nc
2025-03-13 09:25:07   22.9 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202204.nc
2025-03-13 09:36:17   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202205.nc
2025-03-13 09:59:53   22.9 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202206.nc
2025-03-13 10:00:33   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202207.nc
2025-03-13 10:08:02   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202208.nc
2025-03-13 10:15:23   22.9 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202209.nc
2025-03-13 10:15:57   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202210.nc
2025-03-13 10:39:27   22.9 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202211.nc
2025-03-13 10:40:50   23.6 GiB 2022_12US1/icbc/CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M/BCON_CONC_12US1_CMAQv54_2022_108NHEMI_STAGE_CRACCM2_FROM_CB6R5M_regrid_202212.nc
2025-03-13 09:22:59    2.9 GiB 2022_12US1/icbc/ICON_CONC_12US1_CMAQv54_2022_36US3_STAGE_CRACCM2_FROM_CB6R5_regrid_20211222.nc
2025-03-12 14:00:34   30.9 KiB index.html
2025-03-14 11:54:01    1.7 KiB readme.html

Total Objects: 6196
   Total Size: 2.6 TiB
</pre>

Command to copy files from the bucket to your local filesystem (the system where you are running the aws cli) and place it under the path that you specify for /your_local_path.

<pre>
aws s3 --no-sign-request --region=us-east-1 cp --recursive s3://cmaq-12us1-cracmm2-modeling-platform-2022/ /<your_local_path>/
</pre>


<br>
Note, links are not supported on the aws s3 bucket, so the following links may need to be created on your local filesystem.<br>

<br>
``` <br>
cd /<your_local_path>/2022_12US1/emis/cracmmv2_20241031/cmaq_ready <br>
ln -s ./cmv_c1c2_12    cmv_c1c2_grouped <br>
ln -s ./cmv_c3_12    cmv_c3_12_grouped <br>
ln -s ../premerged/rwc    rwc<br>
```<br>

Instructions to obtain MCIP files for CMAQ from the OAQPS 2022V1 AWS bucket.<br>

List files in the 12US1 MCIP directory:<br>

```
aws s3 ls --no-sign-request s3://epa-2022-modeling-platform/MCIP/12US1/
```

Recursively copy files for the first 10 days: <br> - note, the command includes the --dryrun option which will need to be removed, to the subdirectory that is used in the run script: run_cctm_2022r1_12US1_CRACMM.csh. 

```
cd <your_local_path>/data/CMAQ_Modeling_Platform_2022/2022_12US1/met/
 aws s3 cp --dryrun --recursive --exclude "*" --include "*21122*" s3://epa-2022-modeling-platform/MCIP/12US1/ ./WRFv4.4.2_LTNG_MCIP5.3.3/
```

<br>
Please send an email with any questions or difficulties to Liz Adams lizadams@email.unc.edu

<br>

Directories to copy<br>
/work/MOD3DATA/2022_12US1/epic  <br>
/work/MOD3DATA/2022_12US1/wwllns <br>
<br>


Files to copy <br>
/work/MOD3DATA/2022_12US1/misc/beis4_beld6_norm_emis.12US1.ncf <br>
/work/MOD3DATA/2022_12US1/GRIDDESC <br>
/work/MOD3DATA/2022_12US1/surface/GRIDMASK_STATES_12US1.nc <br>
/work/MOD3DATA/2022_12US1/surface/ARID_CONUS.ncf <br>
/work/MOD3DATA/2022_12US1/surface/CT3_CONUS.ncf <br>
/work/MOD3DATA/2022_12US1/surface/EFMAPS_CONUS.ncf<br>
/work/MOD3DATA/2022_12US1/surface/FERT_CONUS.ncf<br>
/work/MOD3DATA/2022_12US1/surface/LAI3_CONUS.ncf<br>
/work/MOD3DATA/2022_12US1/surface/LANDTYPE_CONUS.ncf<br>
/work/MOD3DATA/2022_12US1/surface/LDF_CONUS.ncf <br>
/work/MOD3DATA/2022_12US1/surface/NDEP_CONUS.ncf <br>
/work/MOD3DATA/2022_12US1/surface/NONARID_CONUS.ncf<br>
/work/MOD3DATA/2022_12US1/surface/OCEAN_*_L3m_MC_CHL_chlor_a_12US1.nc<br>




<br>
With these files and the 2022 met from the OAQPS 2022V1 AWS bucket, users should be able to run the 2022 CRACMM2 script we have in our 6.0b1 branch: https://github.com/kmfoley/CMAQ_CMAS/blob/6.0b1/CCTM/scripts/run_cctm_2022v1_12US1_CRACMM2.csh <br>





One thing to note for this runscript.  It sets the OMIfile to <br>

set OMIfile   = OMI_1979_to_2022.dat <br>



However in this 6.0b1 branch there is a new, higher resolution OMI file that users should use called omi_cmaq_2005through2024_27x27.dat <br>

https://github.com/kmfoley/CMAQ_CMAS/blob/6.0b1/CCTM/src/phot/inline/omi_cmaq_2005through2024_27x27.dat <br>

<br>



</body>
</html>

